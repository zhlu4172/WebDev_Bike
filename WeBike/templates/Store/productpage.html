{% extends "../base.html" %} {% load static %} {% block content %}
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{% static 'css/productpage.css' %}" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
    crossorigin="anonymous"
  />
</head>
<body>
  <div class="product_body">
    <div class="checkbox__left">
      <div class="left_search">
        <input type="text" placeholder="Search.." onchange="changeCheckbox()" id="searchProduct"/>
      </div>
      <div class="checkbox-group" id="review">
        <div class="checkbox_title">Customer Review</div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingFive"
              rel="ratingFive"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
          </span>
        </div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingFour"
              rel="ratingFour"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star unchecked"></span>
          </span>
        </div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingThree"
              rel="ratingThree"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
          </span>
        </div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingTwo"
              rel="ratingTwo"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
          </span>
        </div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingOne"
              rel="ratingOne"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
          </span>
        </div>
        <div class="star-block">
          <span class="star-span"
            ><input
              class="form-check-input"
              type="checkbox"
              value=""
              id="ratingZero"
              rel="ratingZero"
              checked
              onchange="changeCheckbox()"
          /></span>
          <span class="rating-five-star" for="ratingFive">
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
            <span class="fa fa-star unchecked"></span>
          </span>
        </div>
      </div>

      <div class="checkbox-group" id="se_price">
        <div class="checkbox_title">Buy Price</div>
        <div class="form-check-less_than_500_buy">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckless500buy"
            rel="flexCheckless500buy"
            checked
            onchange="changeCheckbox();"
          />
          <label class="form-check-label" for="flexCheckless500buy">
            Up tp $500
          </label>
        </div>
        <div class="form-check-500_to_1000_buy">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck500To1000buy"
            rel="flexCheck500To1000buy"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck500To1000buy">
            $500 - $1000
          </label>
        </div>
        <div class="form-check-1000_to_1500_buy">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck1000To1500buy"
            rel="flexCheck1000To1500buy"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck1000To1500buy">
            $1000 - $1500
          </label>
        </div>
        <div class="form-check-1500_to_2000_buy">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck1500To2000buy"
            rel="flexCheck1500To2000buy"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck1500To2000buy">
            $1500 - $2000
          </label>
        </div>
        <div class="form-check-above_2000_buy">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckAbove2000buy"
            rel="flexCheckAbove2000buy"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheckAbove2000buy">
            $2000 & above
          </label>
        </div>
      </div>
      <div class="checkbox-group" id="re_price">
        <div class="checkbox_title">Rent Price</div>
        <div class="form-check-less_than_50_rent">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckless50rent"
            rel="flexCheckless50rent"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheckless50rent">
            Up tp $50
          </label>
        </div>
        <div class="form-check-50_to_100_rent">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck50To100rent"
            rel="flexCheck50To100rent"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck50To100rent">
            $50 - $100
          </label>
        </div>
        <div class="form-check-100_to_150_rent">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck100To150rent"
            rel="flexCheck100To150rent"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck1000To1500rent">
            $100 - $150
          </label>
        </div>
        <div class="form-check-150_to_200_rent">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck150To200rent"
            rel="flexCheck150To200rent"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck150To200rent">
            $150 - $200
          </label>
        </div>
        <div class="form-check-above_200_rent">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckAbove200rent"
            rel="flexCheckAbove200rent"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheckAbove200rent">
            $200 & above
          </label>
        </div>
      </div>
      <div class="checkbox-group" id="distance">
        <div class="checkbox_title">Distance</div>
        <div class="form-check-less_than_500">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckless500"
            rel="flexCheckless500"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheckless500">
            Up tp 500m
          </label>
        </div>
        <div class="form-check-500_to_1">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck500To1"
            rel="flexCheck500To1"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck500To1">
            500m - 1km
          </label>
        </div>
        <div class="form-check-1_to_2">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck1To2"
            rel="flexCheck1To2"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck1To2">
            1km - 2km
          </label>
        </div>
        <div class="form-check-2_to_5">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck2To5"
            rel="flexCheck2To5"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck2To5">
            2km - 5km
          </label>
        </div>
        <div class="form-check-5_to_10">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheck5To10"
            rel="flexCheck5To10"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheck5To10">
            5km - 10km
          </label>
        </div>
        <div class="form-check-above_10">
          <input
            class="form-check-input"
            type="checkbox"
            value=""
            id="flexCheckMore10"
            rel="flexCheckMore10"
            checked
            onchange="changeCheckbox()"
          />
          <label class="form-check-label" for="flexCheckMore10">
            above 10km
          </label>
        </div>
      </div>
    </div>
    <div class="products__right">
      <div class="bike-list">
        {% for product in products %}
        
          {% if product.Is_Available %}
            <div
            class="bike-card"
            onclick="location.href='{% url 'product_info' product.Product_ID %}'"
          >
            <div class="bike-pic">
                {% if product.Stock <= 0 %}
                    <div class="sold_out">Sold Out</div>
                {% endif %}
              <!-- <img class="fake_bike_pic" class="fake_bike_pic" src="{% static 'images/bike.png' %}" class="bicycles"> -->
              {% for single_media in product_media %} 
                {% if single_media.Product_ID.Product_ID == product.Product_ID%}
                <img
                  class="fake_bike_pic"
                  class="fake_bike_pic"
                  src="{{ single_media.Storage_location }}"
                  class="bicycles"
                />
                {% endif %} 
              {% endfor %}
            </div>
            <span class="bike-name">{{ product.Product_name}}</span>
            <span class="stars-outer">
              <div class="stars-inner">
                <script>
                  var total = 0;
                  var cnt = 0;
                  var list = [];
                  {% for shop in shops %}
                    {% if shop.Shop_ID == product.Shop_ID.Shop_ID %}
                      {% for review in reviews %}
                        {% if review.Reviewee.id == shop.User_ID.id %}
                          cnt += 1;
                          total += {{ review.Rating_value }};      
                          console.log(cnt)     
                        {% endif %}
                      {% endfor %}
                    {% endif %}
                  {% endfor %}
                  var average = parseFloat(total/cnt).toFixed(2);
                  var elements = document.querySelectorAll(".stars-inner");
                  elements[{{ forloop.counter0 }}].style.width = (100 * average) / 5 + "%";
                </script>
              </div>
            </span>

            <div class="discription">
              {% for description in productdescriptions %} 
                {% if description.Product_ID.Product_ID == product.Product_ID %} 
                  {{ description.Description }} 
                {% endif %} 
              {% endfor %}
            </div>
            <div class="price-distance">
              <div class="sell-price"><Strong>SELL</Strong>&nbsp&nbsp&nbsp${{ product.Sell_Price}}</div>
              <span class="rent-price"><Strong>RENT</Strong>&nbsp&nbsp&nbsp${{ product.Rent_Price}}</span>
              <span class="distance" id="{{product.Product_ID}}">0.0km</span>
              <span class="place">{{ product.Shop_ID.Location}}</span>
            </div>
          </div>
          {% endif %}
        
        {% endfor %}
      </div>
      
      <div class="pagination_section">
        <a href="#">< Previous</a>
        <a href="#" title="Algorithm">1</a>
        <a href="#" title="DataStructure">2</a>
        <a href="#" title="Languages">3</a>
        <a href="#" title="Interview" class="active">4</a>
        <a href="#" title="practice">5</a>
        <a href="#">Next ></a>
      </div>
    </div>
  </div>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
    crossorigin="anonymous"
  >
  </script>
  <script src="{% static 'js/product.js' %}"></script>
    <script>
        if (localStorage.getItem("searchContent") !== null || localStorage.getItem("searchContent") !== "") {
            console.log(localStorage.getItem("searchContent"));
            document.getElementById("searchProduct").value = localStorage.getItem("searchContent");
            document.getElementById("searchProduct").onchange();
            localStorage.removeItem("searchContent");
        }
    </script>
</body>

{% endblock %}
